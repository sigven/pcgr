<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pcgrr">
<title>Installation • PCGR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Installation">
<meta property="og:description" content="pcgrr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PCGR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.13</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">Intro</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/installation.html">Installation</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/running.html">Running</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/input.html">Input files</a>
    <a class="dropdown-item" href="../articles/output.html">Output files</a>
    <a class="dropdown-item" href="../articles/variant_classification.html">Variant classification</a>
    <a class="dropdown-item" href="../articles/annotation_resources.html">Annotation resources</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/faq.html">FAQ</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sigven/pcgr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Installation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sigven/pcgr/blob/HEAD/../vignettes/installation.Rmd" class="external-link"><code>../vignettes/installation.Rmd</code></a></small>
      <div class="d-none name"><code>installation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation-instructions">Installation Instructions<a class="anchor" aria-label="anchor" href="#installation-instructions"></a>
</h2>
<p><strong>Tip:</strong> Check out the <a href="https://github.com/sigven/pcgr/tree/master/install" class="external-link uri">https://github.com/sigven/pcgr/tree/master/install</a>
directory for installation helper scripts.</p>
<p>PCGR requires a <strong>data bundle</strong> that contains the
reference data, <strong>sample inputs</strong> (e.g. somatic variants in
a VCF), and an <strong>output directory</strong> to output the results
to.</p>
<p>Here’s an example scenario that will be used in the following
sections:</p>
<ul>
<li>data bundle downloaded in <code>/Users/you/dir1/data</code>;</li>
<li>sample inputs at <code>/Users/you/dir2/pcgr_inputs</code>;</li>
<li>output goes to <code>/Users/you/dir3/pcgr_outputs</code> (make sure
this directory exists);</li>
<li>your PCGR codebase is installed in
<code>/Users/you/dir4/PCGR</code>;</li>
</ul>
<div class="section level3">
<h3 id="step-1-download-data-bundle">STEP 1: Download data bundle<a class="anchor" aria-label="anchor" href="#step-1-download-data-bundle"></a>
</h3>
<p>Download and unpack the human assembly-specific data bundle:</p>
<ul>
<li><p><a href="http://insilico.hpc.uio.no/pcgr/pcgr.databundle.grch37.20220119.tgz" class="external-link">grch37
data bundle - 20220119</a> (approx 20Gb)</p></li>
<li><p><a href="http://insilico.hpc.uio.no/pcgr/pcgr.databundle.grch38.20220119.tgz" class="external-link">grch38
data bundle - 20220119</a> (approx 21Gb)</p></li>
<li><p>Example:</p></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="va">GENOME</span><span class="op">=</span><span class="st">"grch38"</span> <span class="co"># or "grch37"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="va">BUNDLE</span><span class="op">=</span><span class="st">"pcgr.databundle.</span><span class="va">${GENOME}</span><span class="st">.20220119.tgz"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> http://insilico.hpc.uio.no/pcgr/<span class="va">${BUNDLE}</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gzip</span> <span class="at">-dc</span> <span class="va">${BUNDLE}</span> <span class="kw">|</span> <span class="fu">tar</span> xvf <span class="at">-</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-download-pcgr-github-repository">STEP 2: Download PCGR GitHub repository<a class="anchor" aria-label="anchor" href="#step-2-download-pcgr-github-repository"></a>
</h3>
<p>Download and unpack the latest software release from <a href="https://github.com/sigven/pcgr/releases" class="external-link uri">https://github.com/sigven/pcgr/releases</a>.</p>
<p>Alternatively if you have <code>git</code> installed, you can do:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="va">PCGR_VERSION</span><span class="op">=</span><span class="st">"X.X.X"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="va">OUTPUT_DIRECTORY</span><span class="op">=</span><span class="st">"PCGR"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone <span class="dt">\</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">-b</span> v<span class="va">${PCGR_VERSION}</span> <span class="dt">\</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--depth</span> 1 <span class="dt">\</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    https://github.com/sigven/pcgr.git <span class="dt">\</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="va">${OUTPUT_DIRECTORY}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-set-up-conda-or-docker">STEP 3: Set up Conda or Docker<a class="anchor" aria-label="anchor" href="#step-3-set-up-conda-or-docker"></a>
</h3>
<p>Step 3 depends on if you want to use Conda or Docker:</p>
<ul>
<li>For Conda, continue reading the <a href="#condasetup">PCGR Conda
setup</a>.</li>
<li>For Docker, skip to the <a href="#dockersetup">PCGR Docker
setup</a>.</li>
</ul>
<p><a name="condasetup"></a></p>
</div>
<div class="section level3">
<h3 id="option-1-conda">Option 1: Conda<a class="anchor" aria-label="anchor" href="#option-1-conda"></a>
</h3>
<div class="section level4">
<h4 id="a-miniconda-and-mamba">a) Miniconda and Mamba<a class="anchor" aria-label="anchor" href="#a-miniconda-and-mamba"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Download and install the Miniconda installer from <a href="https://docs.conda.io/en/latest/miniconda.html" class="external-link uri">https://docs.conda.io/en/latest/miniconda.html</a>:</li>
</ol>
<ul>
<li>Make sure to download the Linux or MacOSX script according to which
platform you’re currently on.</li>
<li>Run <code>bash miniconda.sh</code> and follow the prompts (it should
be okay to accept the defaults, unless you want to choose a different
installation location than the default <code>~/miniconda3</code>).</li>
<li>Exit your current terminal session and open a new one. You should
now notice something like a <code>(base)</code> string as a prefix in
your terminal prompt. This means that you’re in the <code>base</code>
conda environment, and you’re ready to start installing the conda
environments for PCGR.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Install <a href="https://github.com/mamba-org/mamba" class="external-link">Mamba</a> in
this <code>base</code> environment, which is a very fast conda package
installer.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="va">PLATFORM</span><span class="op">=</span><span class="st">"MacOSX"</span> <span class="co"># or "Linux"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="va">MINICONDA_URL</span><span class="op">=</span><span class="st">"https://repo.continuum.io/miniconda/Miniconda3-latest-</span><span class="va">${PLATFORM}</span><span class="st">-x86_64.sh"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="va">${MINICONDA_URL}</span> <span class="at">-O</span> miniconda.sh <span class="kw">&amp;&amp;</span> <span class="fu">chmod</span> +x miniconda.sh</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> miniconda.sh</span></code></pre></div>
<pre class="text"><code># exit terminal and open new one - you should now see:
(base) $
(base) $ conda install -c conda-forge mamba

(base) $ mamba --version
mamba 0.19.1
conda 4.11.0</code></pre>
</div>
<div class="section level4">
<h4 id="b-create-pcgr-conda-environments">b) Create PCGR conda environments<a class="anchor" aria-label="anchor" href="#b-create-pcgr-conda-environments"></a>
</h4>
<p>The <code>conda/env</code> directory in the PCGR codebase contains
two YAML files which can be used to create the required conda
environments for the Python component (<code>pcgr</code>) and the R
components (<code>pcgrr</code> (and <code>cpsr</code>)). We install the
conda dependencies for these two environments in the
<code>conda/env</code> directory:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/you/dir4/PCGR</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="va">PLATFORM</span><span class="op">=</span><span class="st">"osx-64"</span> <span class="co"># or "linux-64"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="va">PCGR_CONDA_ENV_DIR</span><span class="op">=</span><span class="st">"./conda/env"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ex">mamba</span> create <span class="at">--prefix</span> <span class="va">${PCGR_CONDA_ENV_DIR}</span>/pcgr <span class="at">--file</span> <span class="va">${PCGR_CONDA_ENV_DIR}</span>/env/lock/pcgr-<span class="va">${PLATFORM}</span>.lock</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="ex">mamba</span> create <span class="at">--prefix</span> <span class="va">${PCGR_CONDA_ENV_DIR}</span>/pcgrr <span class="at">--file</span> <span class="va">${PCGR_CONDA_ENV_DIR}</span>/env/lock/pcgrr-<span class="va">${PLATFORM}</span>.lock</span></code></pre></div>
<p>The above process takes 10-15min when installing from scratch. In the
end, you can confirm your conda environments have been installed
correctly (notice how the paths are different to the <code>base</code>
env installation):</p>
<pre class="text"><code>$ (base) conda env list
# conda environments:
#
base    *  /Users/you/miniconda3
pcgr       /Users/you/dir4/PCGR/conda/env/pcgr
pcgrr      /Users/you/dir4/PCGR/conda/env/pcgrr</code></pre>
</div>
<div class="section level4">
<h4 id="c-activate-pcgr-conda-environment">c) Activate pcgr conda environment<a class="anchor" aria-label="anchor" href="#c-activate-pcgr-conda-environment"></a>
</h4>
<p>You need to activate the <code>PCGR/conda/env/pcgr</code> conda
environment, and test that it works correctly with
e.g. <code>pcgr --version</code>:</p>
<pre class="text"><code>$ cd /Users/you/dir4/PCGR
(base) $ conda activate ./conda/env/pcgr
# note how the full path to the locally installed conda environment is now displayed

(/Users/you/dir4/PCGR) $ which pcgr
/Users/you/dir4/PCGR/conda/env/pcgr/bin/pcgr

(/Users/you/dir4/PCGR) $ pcgr --version
pcgr X.X.X

(/Users/you/dir4/PCGR) $ which pcgrr.R
/Users/you/dir4/PCGR/conda/env/pcgr/bin/pcgrr.R</code></pre>
<p>You should now be all set up to run PCGR! Continue on to <a href="running.html#example-run">an example run</a>.</p>
<p><a name="dockersetup"></a></p>
</div>
</div>
<div class="section level3">
<h3 id="option-2-docker">Option 2: Docker<a class="anchor" aria-label="anchor" href="#option-2-docker"></a>
</h3>
<div class="section level4">
<h4 id="a-install-docker">a) Install Docker<a class="anchor" aria-label="anchor" href="#a-install-docker"></a>
</h4>
<p>For installing Docker, follow the instructions at <a href="https://docs.docker.com/engine/install/" class="external-link uri">https://docs.docker.com/engine/install/</a> for your Linux
or MacOSX machine. NOTE: We have not been able to perform enough testing
on the Windows platform, and we have received feedback that particular
versions of Docker/Windows do not work with PCGR (an example being <a href="https://github.com/docker/toolbox/issues/607" class="external-link">mounting of data
volumes</a>).</p>
<ul>
<li>Test that Docker is running, e.g. by typing <code>docker ps</code>
or <code>docker images</code> in the terminal window.</li>
<li>Adjust the computing resources dedicated to the Docker, i.e.: Memory
of minimum 5GB, CPUs minimum 4 (see e.g. how to do that on <a href="https://docs.docker.com/desktop/mac/" class="external-link">MacOSX</a>).</li>
</ul>
</div>
<div class="section level4">
<h4 id="b-download-pcgr-docker-image">b) Download PCGR Docker Image<a class="anchor" aria-label="anchor" href="#b-download-pcgr-docker-image"></a>
</h4>
<ul>
<li>Pull the <a href="https://hub.docker.com/r/sigven/pcgr/tags" class="external-link">PCGR
Docker image</a> from DockerHub (approx 5.7Gb) with:
<code>docker pull sigven/pcgr:vX.X.X</code>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="c-run-pcgr-docker-container-directly-recommended-or-indirectly">c) Run PCGR Docker Container directly (<em>recommended</em>) or
indirectly<a class="anchor" aria-label="anchor" href="#c-run-pcgr-docker-container-directly-recommended-or-indirectly"></a>
</h4>
<p>This next step depends on how familiar you are with working with
Docker volumes (<a href="https://docs.docker.com/storage/volumes/" class="external-link uri">https://docs.docker.com/storage/volumes/</a>).</p>
<ul>
<li>If you know how to use the
<code>-v &lt;host&gt;:&lt;container&gt;</code> Docker option, you can
use the PCGR Docker image directly, which would not involve having to
set up a Python environment. Jump to the <a href="#dockerdirectsetup">PCGR Docker direct setup</a> for more
details.</li>
<li>Alternatively, you can allow PCGR itself to handle the Docker volume
setup intricacies, but this requires a Python environment setup (which
can be a bit cumbersome if you’re not too familiar with conda or
virtualenv). Jump to the <a href="#dockerindirectsetup">PCGR Docker
indirect setup</a> for more details.</li>
</ul>
<p><a name="dockerdirectsetup"></a></p>
<div class="section level5">
<h5 id="directly">Directly<a class="anchor" aria-label="anchor" href="#directly"></a>
</h5>
<details><summary>
CLICK ME!
</summary><p>You’ll need to map your PCGR inputs to Docker container paths. For
example, say you have the input VCF <code>sampleX.vcf.gz</code> stored
in the directory <code>/Users/you/project1</code>. You would need to
supply Docker with a <code>--volume</code> (or <code>-v</code>) option
mapping the directory of that VCF with a directory inside the Docker
container, e.g. <code>/home/input_vcf_dir</code>. That would become:
<code>-v /Users/you/project1:/home/input_vcf_dir</code> (note the
<code>:</code> separating your directory from the container’s
directory).</p>
<p>Then your command would look something like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> container run <span class="at">-it</span> <span class="at">--rm</span> <span class="dt">\</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">-v</span> /Users/you/dir1/data:/root/pcgr_data <span class="dt">\</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">-v</span> /Users/you/dir2/pcgr_inputs:/root/pcgr_inputs <span class="dt">\</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">-v</span> /Users/you/dir3/pcgr_outputs:/root/pcgr_outputs <span class="dt">\</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    sigven/pcgr:v0.9.4 <span class="dt">\</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    pcgr <span class="dt">\</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">--input_vcf</span> <span class="st">"/root/pcgr_inputs/tumor_sample.BRCA.vcf.gz"</span> <span class="dt">\</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">--pcgr_dir</span> <span class="st">"/root/pcgr_data"</span> <span class="dt">\</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">--output_dir</span> <span class="st">"/root/pcgr_outputs"</span> <span class="dt">\</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">--genome_assembly</span> <span class="st">"grch38"</span> <span class="dt">\</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">--sample_id</span> <span class="st">"SampleB"</span> <span class="dt">\</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">--assay</span> <span class="st">"WGS"</span> <span class="dt">\</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">--vcf2maf</span> <span class="dt">\</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">--no_docker</span></span></code></pre></div>
<ul>
<li>Note the <code>--no_docker</code> option in the above command. Since
you’re running that command <em>directly</em> inside the container, you
need to use that option to bypass the <em>indirect</em> Docker PCGR
run.</li>
<li>Also note the path mappings. You’re using the <em>container</em>
paths in the command, not the <em>host</em> (your machine’s) paths.</li>
</ul></details><p><a name="dockerindirectsetup"></a></p>
</div>
<div class="section level5">
<h5 id="indirectly-not-recommended">Indirectly (not recommended)<a class="anchor" aria-label="anchor" href="#indirectly-not-recommended"></a>
</h5>
<details><summary>
CLICK ME!
</summary><p>Install the PCGR Python component on your local machine. Only
requirement is Python &gt; 3.6. We would <em>strongly</em> advise to
install it in a virtual Python environment with conda (or virtualenv)
(read the previous sections for how to install conda). Or else it will
(probably) use your system’s default Python and you’ll end up in a
situation like <a href="https://xkcd.com/1987/" class="external-link uri">https://xkcd.com/1987/</a>. Here’s an example using
conda/mamba, with only Python 3.7 as a dependency:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">base</span><span class="kw">)</span> <span class="ex">$</span> mamba create <span class="at">-n</span> pcgr_docker_env <span class="at">-c</span> conda-forge python=3.7</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">base</span><span class="kw">)</span> <span class="ex">$</span> conda activate pcgr_docker_env</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">pcgr_docker_env</span><span class="kw">)</span> <span class="ex">$</span> which python</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/Users/you/miniconda3/envs/pcgr_docker_env/bin/python</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">pcgr_docker_env</span><span class="kw">)</span> <span class="ex">$</span> cd /Users/you/dir4/PCGR</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">pcgr_docker_env</span><span class="kw">)</span> <span class="ex">$</span> pip install <span class="at">-e</span> .</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Obtaining</span> file:///Users/you/dir4/PCGR</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Preparing</span> metadata <span class="er">(</span><span class="ex">setup.py</span><span class="kw">)</span> <span class="ex">...</span> done</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Installing</span> collected packages: pcgr</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Running</span> setup.py develop for pcgr</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="ex">Successfully</span> installed pcgr-X.X.X</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">pcgr_docker_env</span><span class="kw">)</span> <span class="ex">$</span> which pcgr</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="ex">/Users/you/miniconda3/envs/pcgr_docker/bin/pcgr</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">pcgr_docker_env</span><span class="kw">)</span> <span class="ex">$</span> pcgr <span class="at">--version</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="ex">pcgr</span> X.X.X</span></code></pre></div>
<p>You should now be all set up to run PCGR from within that
<code>pcgr_docker_env</code> conda environment! Here’s an example
command:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">pcgr_docker_env</span><span class="kw">)</span> <span class="ex">$</span> pcgr <span class="dt">\</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input_vcf</span> <span class="st">"/Users/you/dir1/tumor_sample.BRCA.vcf.gz"</span> <span class="dt">\</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--pcgr_dir</span> <span class="st">"/Users/you/dir2/data"</span> <span class="dt">\</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--output_dir</span> <span class="st">"/Users/you/dir3/pcgr_outputs"</span> <span class="dt">\</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--genome_assembly</span> <span class="st">"grch38"</span> <span class="dt">\</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sample_id</span> <span class="st">"SampleB"</span> <span class="dt">\</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--assay</span> <span class="st">"WGS"</span></span></code></pre></div>
<ul>
<li>Note that we do not specify the <code>--no_docker</code> option.
PCGR will automatically look for the more recent Docker container on
your machine, and then run the above command inside it
<em>indirectly</em>.</li>
<li>Also note the path mappings. You’re using the actual <em>host</em>
(your machine’s) paths, not the <em>container</em> paths.</li>
</ul></details>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/sigven" class="external-link">Sigve Nakken</a>,
Peter Diakumis.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
